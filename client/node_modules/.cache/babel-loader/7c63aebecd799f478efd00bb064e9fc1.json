{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-typescript-graphql-master\\\\client\\\\src\\\\components\\\\contact\\\\contact.creation.tsx\";\nimport * as React from \"react\";\nimport { useMutation, useApolloClient } from \"react-apollo\";\nimport { AddContactMutation, UpdateContactMutation } from \"../../graphql/mutations/contact.mutations\";\nimport { ContactDetailQuery, ContactListQuery } from \"../../graphql/queries/contact.queries\";\nconst ContactCreation = props => {\n  const initialContcatState = {\n    id: 0,\n    name: \"\",\n    email: \"\",\n    dateOfBirth: \"\"\n  };\n  const client = useApolloClient();\n  const [addContact] = useMutation(AddContactMutation);\n\n  // contact is a state variable\n  const [contact, setContact] = React.useState(initialContcatState);\n  React.useEffect(() => {\n    if (props.editContactId && props.editContactId > 0) {\n      client.query({\n        query: ContactDetailQuery,\n        variables: {\n          id: props.editContactId\n        }\n      }).then(result => {\n        const contact = result.data.contact;\n        setContact(contact);\n      });\n    }\n  }, [props.editContactId]);\n  const handleReset = () => {\n    setContact(initialContcatState);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    // console.log(`ContactCreation::handleSubmit=>contact ${JSON.stringify(contact)}`);\n    if (contact.id > 0) {\n      client.mutate({\n        mutation: UpdateContactMutation,\n        variables: {\n          id: contact.id,\n          name: contact.name,\n          email: contact.email,\n          dateOfBirth: contact.dateOfBirth\n        },\n        refetchQueries: [{\n          query: ContactListQuery\n        }]\n      }).then(result => {\n        const contact = result.data.contact;\n        console.log(`Updated successfully...`);\n      });\n    } else {\n      addContact({\n        variables: {\n          name: contact.name,\n          email: contact.email,\n          dateOfBirth: contact.dateOfBirth\n        },\n        refetchQueries: [{\n          query: ContactListQuery\n        }] // to update ContactListQuery on ContactList.tsx\n      });\n    }\n\n    handleReset();\n  };\n\n  /**\r\n   * Common input change event\r\n   * When the field is entered an event is raised and update the state\r\n   */\n  const handleInputChange = e => {\n    e.preventDefault();\n    const target = e.target;\n    setContact(contact => ({\n      ...contact,\n      [target.name]: target.value\n    }));\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card bg-light mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \"Persons Details\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 19\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    value: contact.name,\n    placeholder: \"Enter name\",\n    className: \"form-control\",\n    required: true,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    value: contact.email,\n    placeholder: \"Enter email\",\n    className: \"form-control\",\n    \"aria-describedby\": \"emailHelp\",\n    required: true,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    id: \"emailHelp\",\n    className: \"form-text text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, \"We'll never share your email with anyone else.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, \"Date of birth\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    max: \"\",\n    min: \"\",\n    name: \"dateOfBirth\",\n    value: contact.dateOfBirth,\n    placeholder: \"Enter date of birth\",\n    className: \"form-control\",\n    required: true,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }))), contact.id > 0 && /*#__PURE__*/React.createElement(\"input\", {\n    className: \"btn btn-outline-danger\",\n    type: \"submit\",\n    value: \"Update\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 34\n    }\n  }), ` `, contact.id <= 0 && /*#__PURE__*/React.createElement(\"input\", {\n    className: \"btn btn-outline-primary\",\n    type: \"submit\",\n    value: \"Save\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 35\n    }\n  }), ` `, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"btn btn-outline-warning\",\n    type: \"button\",\n    value: \"Reset\",\n    onClick: handleReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }), ` `)))));\n};\nexport default ContactCreation;","map":{"version":3,"names":["React","useMutation","useApolloClient","AddContactMutation","UpdateContactMutation","ContactDetailQuery","ContactListQuery","ContactCreation","props","initialContcatState","id","name","email","dateOfBirth","client","addContact","contact","setContact","useState","useEffect","editContactId","query","variables","then","result","data","handleReset","handleSubmit","e","preventDefault","mutate","mutation","refetchQueries","console","log","handleInputChange","target","value"],"sources":["D:/react-typescript-graphql-master/client/src/components/contact/contact.creation.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useMutation, useApolloClient } from \"react-apollo\";\r\nimport { IContact } from \"../../models/contact\";\r\nimport { AddContactMutation, UpdateContactMutation } from \"../../graphql/mutations/contact.mutations\";\r\nimport { ContactDetailQuery, ContactListQuery } from \"../../graphql/queries/contact.queries\";\r\n\r\ninterface IOwnProps {\r\n  editContactId?: number;\r\n}\r\n\r\nconst ContactCreation: React.FunctionComponent<IOwnProps> = (\r\n  props: IOwnProps\r\n) => {\r\n  const initialContcatState: IContact = {\r\n    id: 0,\r\n    name: \"\",\r\n    email: \"\",\r\n    dateOfBirth: \"\"\r\n  };\r\n\r\n  const client = useApolloClient();\r\n  \r\n  const [addContact] = useMutation(AddContactMutation);\r\n\r\n  // contact is a state variable\r\n  const [contact, setContact] = React.useState(initialContcatState);\r\n\r\n  React.useEffect(() => {\r\n    if (props.editContactId && props.editContactId! > 0) {\r\n      client.query({query: ContactDetailQuery, variables: {id: props.editContactId}}).then(result => {\r\n        const contact = result.data.contact as IContact\r\n        setContact(contact)\r\n      });\r\n    }\r\n  }, [props.editContactId])\r\n\r\n  const handleReset = () => {\r\n    setContact(initialContcatState);\r\n  }\r\n\r\n  const handleSubmit = (\r\n    e: any // React.SyntheticEvent<HTMLInputElement | HTMLButtonElement>\r\n  ) => {\r\n    e.preventDefault();\r\n    // console.log(`ContactCreation::handleSubmit=>contact ${JSON.stringify(contact)}`);\r\n    if (contact.id > 0) {\r\n      client.mutate({mutation: UpdateContactMutation, variables: {\r\n        id: contact.id,\r\n        name: contact.name,\r\n        email: contact.email,\r\n        dateOfBirth: contact.dateOfBirth\r\n      }, refetchQueries: [{query: ContactListQuery}]}).then(result => {\r\n        const contact = result.data.contact as IContact\r\n        console.log(`Updated successfully...`)\r\n      });\r\n    } else {\r\n      addContact({\r\n        variables: {name: contact.name, email: contact.email, dateOfBirth: contact.dateOfBirth},\r\n        refetchQueries: [{query: ContactListQuery}] // to update ContactListQuery on ContactList.tsx\r\n      })\r\n    }\r\n    \r\n    handleReset();\r\n  };\r\n\r\n  /**\r\n   * Common input change event\r\n   * When the field is entered an event is raised and update the state\r\n   */\r\n  const handleInputChange = (\r\n    e: React.SyntheticEvent<HTMLInputElement | HTMLButtonElement>\r\n  ): void => {\r\n    e.preventDefault();\r\n\r\n    const target = e.target as any;\r\n    setContact(contact => ({ ...contact, [target.name]: target.value }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"card bg-light mb-3\">\r\n          <div className=\"card-header\">Persons Details</div>\r\n          <div className=\"card-body\">\r\n            <div className=\"card-text\">\r\n              <div className=\"form-row\">\r\n                <div className=\"form-group col-md-4\">\r\n                  <label for=\"name\">Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    id=\"name\"\r\n                    value={contact.name}\r\n                    placeholder=\"Enter name\"\r\n                    className=\"form-control\"\r\n                    required\r\n                    onChange={handleInputChange}\r\n                  />\r\n                </div>\r\n                <div className=\"form-group col-md-4\">\r\n                  <label>Email address</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    value={contact.email}\r\n                    placeholder=\"Enter email\"\r\n                    className=\"form-control\"\r\n                    aria-describedby=\"emailHelp\"\r\n                    required\r\n                    onChange={handleInputChange}\r\n                  />\r\n                  <small id=\"emailHelp\" className=\"form-text text-muted\">\r\n                    We'll never share your email with anyone else.\r\n                  </small>\r\n                </div>\r\n                <div className=\"form-group col-md-4\">\r\n                  <label>Date of birth</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    max=\"\"\r\n                    min=\"\"\r\n                    name=\"dateOfBirth\"\r\n                    value={contact.dateOfBirth}\r\n                    placeholder=\"Enter date of birth\"\r\n                    className=\"form-control\"\r\n                    required\r\n                    onChange={handleInputChange}\r\n                  />\r\n                </div>\r\n\r\n              </div>\r\n\r\n              {contact.id > 0 && <input className=\"btn btn-outline-danger\" type=\"submit\" value=\"Update\" />}{` `}\r\n              {contact.id <= 0 && <input className=\"btn btn-outline-primary\" type=\"submit\" value=\"Save\" />}{` `}\r\n              <input className=\"btn btn-outline-warning\" type=\"button\" value=\"Reset\" onClick={handleReset} />{` `}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ContactCreation;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}