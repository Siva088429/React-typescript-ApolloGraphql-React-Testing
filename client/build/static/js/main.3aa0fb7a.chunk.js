(this["webpackJsonpreact-typescript-app"]=this["webpackJsonpreact-typescript-app"]||[]).push([[0],{45:function(e,t,a){e.exports=a(60)},50:function(e,t,a){},53:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n,l,r,c,m,i=a(0),o=a.n(i),s=a(38),d=a.n(s),u=(a(50),a(21)),E=a(22),f=a(28),h=a(27),b=a(18),p=a(4),v=a(9),g=a(10),O=(a(51),a(52),a(53),a(62)),N=a(16),y=a(15),j=Object(y.a)(n||(n=Object(N.a)(["\n{\n  contacts {\n    id\n    name, \n    email,\n    dateOfBirth\n  }\n}"]))),C=Object(y.a)(l||(l=Object(N.a)(["\n  query ($id: ID!) {\n    contact(id: $id) {\n      id\n      name, \n      email,\n      dateOfBirth\n    }\n  }"]))),B=function(e){return i.createElement(i.Fragment,null,i.createElement("div",{className:"error"},i.createElement("small",null,e.error.toString())))},w=function(e){return i.createElement(i.Fragment,null,i.createElement("div",{className:"loading"},i.createElement("small",null,e.message?e.message:"Loading...")))},$=function(e){var t=Object(O.c)(j),a=t.loading,n=t.error,l=t.data;return a?i.createElement(i.Fragment,null,i.createElement(w,null)):n||!l?i.createElement(i.Fragment,null,i.createElement(B,{error:n})):i.createElement(i.Fragment,null,i.createElement("h6",null,"Personal  List"),i.createElement("div",{className:"table-responsive"},i.createElement("table",{className:"table table-striped table-sm"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"#"),i.createElement("th",null,"Name"),i.createElement("th",null,"Email"),i.createElement("th",null,"Date of birth"),i.createElement("th",null,"Actions"))),i.createElement("tbody",null,l&&l.contacts&&l.contacts.length>0&&l.contacts.map((function(t,a){return i.createElement(i.Fragment,{key:a},i.createElement("tr",null,i.createElement("td",null,t.id),i.createElement("td",null,t.name),i.createElement("td",null,t.email),i.createElement("td",null,t.dateOfBirth),i.createElement("th",null,i.createElement("i",{className:"fa fa-edit",onClick:e.handleEdit(t.id),style:{color:"##0d903c",cursor:"pointer"}},"\xa0")," | ",i.createElement("i",{className:"fa fa-trash",onClick:e.handleDelete(t.id),style:{color:"red",cursor:"pointer"}},"\xa0"))))}))))))},D=a(25),x=a(29),k=a(31),I=Object(y.a)(r||(r=Object(N.a)(["\n  mutation addContact($name: String!, $email: String!, $dateOfBirth: String!) {\n    addContact(name: $name, email: $email, dateOfBirth: $dateOfBirth) {\n      id,\n      name,\n      email,\n      dateOfBirth\n    }\n  }"]))),q=Object(y.a)(c||(c=Object(N.a)(["\n  mutation updateContact($id: ID!, $name: String!, $email: String!, $dateOfBirth: String!) {\n    updateContact(id: $id, name: $name, email: $email, dateOfBirth: $dateOfBirth) {\n      id,\n      name,\n      email,\n      dateOfBirth\n    }\n  }"]))),S=Object(y.a)(m||(m=Object(N.a)(["\n  mutation deleteContact($id: ID!) {\n    deleteContact(id: $id)\n  }\n"]))),F=function(e){var t={id:0,name:"",email:"",dateOfBirth:""},a=Object(O.a)(),n=Object(O.b)(I),l=Object(k.a)(n,1)[0],r=i.useState(t),c=Object(k.a)(r,2),m=c[0],o=c[1];i.useEffect((function(){e.editContactId&&e.editContactId>0&&a.query({query:C,variables:{id:e.editContactId}}).then((function(e){var t=e.data.contact;o(t)}))}),[e.editContactId]);var s=function(){o(t)},d=function(e){e.preventDefault();var t=e.target;o((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(D.a)({},t.name,t.value))}))};return i.createElement(i.Fragment,null,i.createElement("form",{onSubmit:function(e){e.preventDefault(),m.id>0?a.mutate({mutation:q,variables:{id:m.id,name:m.name,email:m.email,dateOfBirth:m.dateOfBirth},refetchQueries:[{query:j}]}).then((function(e){e.data.contact;console.log("Updated successfully...")})):l({variables:{name:m.name,email:m.email,dateOfBirth:m.dateOfBirth},refetchQueries:[{query:j}]}),s()}},i.createElement("div",{className:"card bg-light mb-3"},i.createElement("div",{className:"card-header"},"Persons Details"),i.createElement("div",{className:"card-body"},i.createElement("div",{className:"card-text"},i.createElement("div",{className:"form-row"},i.createElement("div",{className:"form-group col-md-4"},i.createElement("label",null,"Name"),i.createElement("input",{type:"text",name:"name",value:m.name,placeholder:"Enter name",className:"form-control",required:!0,onChange:d})),i.createElement("div",{className:"form-group col-md-4"},i.createElement("label",null,"Email address"),i.createElement("input",{type:"email",name:"email",value:m.email,placeholder:"Enter email",className:"form-control","aria-describedby":"emailHelp",required:!0,onChange:d}),i.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),i.createElement("div",{className:"form-group col-md-4"},i.createElement("label",null,"Date of birth"),i.createElement("input",{type:"date",max:"",min:"",name:"dateOfBirth",value:m.dateOfBirth,placeholder:"Enter date of birth",className:"form-control",required:!0,onChange:d}))),m.id>0&&i.createElement("input",{className:"btn btn-outline-danger",type:"submit",value:"Update"})," ",m.id<=0&&i.createElement("input",{className:"btn btn-outline-primary",type:"submit",value:"Save"})," ",i.createElement("input",{className:"btn btn-outline-warning",type:"button",value:"Reset",onClick:s})," ")))))},A=a(19),R=a(44),U=new A.a({freezeResults:!0}),H=new R.a({cache:U,uri:"http://localhost:4000/graphql",assumeImmutableResults:!0}),P=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).renderDeleteAllButton=function(){var e=n.state.contacts;return e&&e.length>0?i.createElement(i.Fragment,null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12",style:{marginBottom:"10px"}},i.createElement("button",{className:"btn btn-warning",onClick:n.handleDeleteAll},"Delete all")))):null},n.handleDelete=function(e){return function(t){H.mutate({mutation:S,variables:{id:e},refetchQueries:[{query:j}]}).then((function(e){console.log("Deleted successfully...")}))}},n.handleEdit=function(e){return function(t){n.setState({editContactId:e})}},n.handleDeleteAll=function(){console.log("TODO: implement delete all functionnality")};return n.state={contacts:[],editContact:{id:0,name:"",email:"",dateOfBirth:""},editContactId:0},n}return Object(E.a)(a,[{key:"render",value:function(){return i.createElement(i.Fragment,null,i.createElement("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},i.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"/#/"},i.createElement("i",{className:"fa fa-home"},""),"React Typescript App")),i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("nav",{className:"col-md-2 d-none d-md-block bg-light sidebar"},i.createElement("div",{className:"sidebar-sticky"},i.createElement("ul",{className:"nav flex-column"},i.createElement("li",{className:"nav-item"},i.createElement("a",{className:"nav-link active",href:"/"},i.createElement("i",{className:"fa fa-users"},""),"Users"," ",i.createElement("span",{className:"sr-only"},"(current)"))))))),i.createElement("div",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4"},i.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},i.createElement("h1",{className:"h2"},"Contact")),i.createElement("div",{className:"row",style:{paddingTop:"50px"}},i.createElement("div",{className:"col-md-12"},"")),i.createElement(F,{editContactId:this.state.editContactId}),i.createElement($,{handleDelete:this.handleDelete,handleEdit:this.handleEdit}))))}}]),a}(i.Component),Q=function(){return i.createElement(p.d,null,i.createElement(p.a,{exact:!0,from:"/",to:"/contact"}),i.createElement(p.b,{exact:!0,path:"/contact",component:P}))},T=Object(g.a)(),W=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"render",value:function(){return console.log("process.env.GRAPH_URI : ".concat("http://localhost:4000/graphql")),i.createElement(i.Fragment,null,i.createElement(v.a,{client:H},i.createElement(b.a,null,i.createElement(p.c,{history:T},i.createElement(Q,null)))))}}]),a}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.3aa0fb7a.chunk.js.map